!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);const s=16,a=100,h=30,o=2,r=4,l={PAUSED:0,RUNNING:1,MENU:2,GAMEOVER:3,GAMEWON:4},d=5,n=(t,e)=>((t,e)=>{const i=parseInt(t.slice(1),16),s=e<0?0:255,a=e<0?-1*e:e,h=i>>16,o=i>>8&255,r=255&i;return`#${(16777216+65536*(Math.round((s-h)*a)+h)+256*(Math.round((s-o)*a)+o)+(Math.round((s-r)*a)+r)).toString(16).slice(1)}`})(t,-.1*e),c=t=>({fill:t.map(n)}),p=[["#c0c999","#fd96a9","#c52184","#470063","#f9b4ed"],["#1b998b","#2d3047","#fffd82","#ff9b71","#e84855"],["#26547c","#ff476f","#ffd166","#06d6ad","#fcfcfc"],["#523a34","#b87d4b","#e5b25d","#f2dd6e","#cff27e"],["#54494b","#7e8287","#9da39a","#b98389","#db2955"]].map((t,e)=>t.map(t=>Array(e+2).fill(t)).map(c)),m={fill:"#fff",stroke:"#000"};class g{constructor({gameWidth:t,gameHeight:e,lives:i}){this.gameWidth=t,this.width=150,this.height=30,this.maxSpeed=7,this.speed=0,this.heartSize=26,this.position={x:t/2-this.width/2,y:e-this.height-10},this.lives=i}moveLeft(){this.speed=-this.maxSpeed}moveRight(){this.speed=this.maxSpeed}stop(){this.speed=0}drawLives(t,{x:e,y:i},s=!1){const{heartSize:a}=this;t.beginPath(),t.fillStyle="#a90000",t.moveTo(e,i+a/4),t.quadraticCurveTo(e,i,e+a/4,i),t.quadraticCurveTo(e+a/2,i,e+a/2,i+a/4),t.quadraticCurveTo(e+a/2,i,e+3*a/4,i),t.quadraticCurveTo(e+a,i,e+a,i+a/4),t.quadraticCurveTo(e+a,i+a/2,e+3*a/4,i+3*a/4),t.lineTo(e+a/2,i+a),t.lineTo(e+a/4,i+3*a/4),t.quadraticCurveTo(e,i+a/2,e,i+a/4),s&&t.fill(),t.stroke(),t.closePath()}draw(t){const{position:{x:e,y:i},width:s,height:a,lives:h,heartSize:r}=this;t.beginPath(),t.strokeStyle=m.stroke,t.lineWidth=o,t.strokeRect(e,i,s,a),t.closePath();for(let a=0;a<3;a++)this.drawLives(t,{x:e+s/3*a+r/2,y:i+2},a<h)}update(){this.position.x+=this.speed,this.position.x<0&&(this.position.x=0),this.position.x>this.gameWidth-this.width&&(this.position.x=this.gameWidth-this.width)}}const f=(t,e)=>{const i=t.position.y+t.size,s=t.position.y-t.size,a=t.position.x+t.size,h=t.position.x,o=e.position.y+e.height,r=e.position.y,l=e.position.x+e.width,d=e.position.x;return i>=r&&s<=o&&h>=d&&a<=l};class u{constructor({gameWidth:t,gameHeight:e,paddle:i,level:s},a){this.size=a,this.gameWidth=t,this.gameHeight=e,this.paddle=i,this.position={x:Math.ceil(Math.random()*t/1.1),y:e/2},this.speed={x:.3*s+2.5,y:.3*s+2.5}}draw(t){const{size:e,position:{x:i,y:s}}=this;t.beginPath(),t.arc(i,s,e,0,2*Math.PI),t.fillStyle=m.fill,t.strokeStyle=m.stroke,t.lineWidth=r,t.stroke(),t.fill(),t.closePath()}update(){this.position.x+=this.speed.x,this.position.y+=this.speed.y,(this.position.x>this.gameWidth-this.size||this.position.x<this.size)&&(this.speed.x=-this.speed.x),this.position.y<this.size&&(this.speed.y=-this.speed.y),f(this,this.paddle)&&(this.speed.y=Math.round(Math.random()+.1)?this.speed.y+=.4:this.speed.y-=.2,this.speed.y=-this.speed.y,this.position.y=this.paddle.position.y-this.size)}}class S{constructor(t){document.addEventListener("keydown",({keyCode:e})=>{switch(e){case 37:t.paddle.moveLeft();break;case 39:t.paddle.moveRight()}}),document.addEventListener("keyup",({keyCode:e})=>{switch(e){case 37:t.paddle.speed<0&&t.paddle.stop();break;case 39:t.paddle.speed>0&&t.paddle.stop();break;case 27:t.togglePause();break;case 32:t.gameState!==l.RUNNING&&t.start();break;case 13:t.gameState!==l.RUNNING&&t.restart()}})}}const b=t=>t.map((t,e)=>e%2==0),y=t=>Math.round(Math.random())?Math.round(Math.random())?b(t):(t=>b(t).map(t=>!t))(t):t,E=t=>(t=>Array(t+4).fill(Array(8).fill(!0)).map(y))(t.level).map((e,i)=>e.map((e,s)=>e?new class{constructor({ball:t,level:e},i){this.width=a,this.height=h,this.ball=t,this.position=i,this.markedForDeletion=!1,this.hitStand=Math.floor(Math.random()*(e+2));const{fill:s}=p[e][Math.floor(Math.random()*d)];this.fill=s}reset(t){this.ball=t}update(){f(this.ball,this)&&(this.ball.speed.y=-this.ball.speed.y,this.hitStand?this.hitStand--:this.markedForDeletion=!0)}draw(t){const{width:e,height:i,position:{x:s,y:a}}=this;t.beginPath(),t.fillStyle=this.fill[this.hitStand],t.rect(s,a,e,i),t.fill(),t.closePath()}}(t,{x:a*s,y:h*i}):null).filter(t=>t)).reduce((t,e)=>t.concat(e),[]);const M=document.getElementById("gameScreen").getContext("2d");M.fillStyle=m.fill,M.strokeStyle=m.stroke;const x=new class{constructor(t,e){this.gameWidth=t,this.gameHeight=e,this.paddle=new g(this),this.ball=new u(this,s),new S(this),this.restart()}reset(){this.paddle=new g(this),this.ball=new u(this,s),this.gameObjects=[this.ball,this.paddle]}restart(){this.level=-1,this.gameState=l.MENU,this.gameObjects=[],this.bricks=[],this.lives=3}start(){this.gameState=l.RUNNING,this.gameObjects=[this.ball,this.paddle]}update(){this.gameState!==l.PAUSED&&this.gameState!==l.MENU&&this.gameState!==l.GAMEOVER&&(5!==this.level?([...this.gameObjects,...this.bricks].forEach(t=>t.update()),this.bricks=this.bricks.filter(t=>!t.markedForDeletion),this.lives||(this.gameState=l.GAMEOVER),this.bricks.length||(this.level++,this.reset(),this.bricks=E(this)),this.ball.position.y>=this.gameHeight&&(this.lives--,this.reset(),this.bricks=this.bricks.map(t=>t.reset(this.ball)||t))):this.gameState=l.GAMEWON)}draw(t){t.font='28px "Press Start 2P"',t.textAlign="center",t.beginPath(),t.fillStyle="#000",t.fillText(this.level+1,this.gameWidth/2,this.gameHeight/2),t.closePath(),this.gameState!==l.GAMEWON&&[...this.gameObjects,...this.bricks].forEach(e=>e.draw(t)),this.gameState!==l.PAUSED&&this.gameState!==l.MENU&&this.gameState!==l.GAMEWON&&this.gameState!==l.GAMEOVER||(t.rect(0,0,this.gameWidth,this.gameHeight),t.fillStyle="#000000cc",t.fill(),t.fillStyle="#fff",t.fillText((this.gameState===l.PAUSED?"Paused":this.gameState===l.MENU&&"Press SPACEBAR to start")||this.gameState===l.GAMEOVER&&"GAME-OVER"||"",this.gameWidth/2,this.gameHeight/2-56),t.fillText((this.gameState===l.PAUSED?"Press ESC or SPACEBAR":this.gameState===l.MENU&&"Press ESC to pause")||this.gameState===l.GAMEWON&&"Congratulations, you won!"||this.gameState===l.GAMEOVER&&"Press ENTER to reset",this.gameWidth/2,this.gameHeight/2),t.fillText((this.gameState===l.PAUSED?"to resume":this.gameState===l.GAMEWON&&"Press ENTER to reset")||this.gameState===l.MENU&&"ENTER while paused to reset"||"",this.gameWidth/2,this.gameHeight/2+56))}togglePause(){this.gameState===l.PAUSED?this.gameState=l.RUNNING:this.gameState=l.PAUSED}}(800,600);let v=0;const P=t=>{const e=t-v;v=t,M.clearRect(0,0,800,600),x.update(e),x.draw(M),requestAnimationFrame(P)};requestAnimationFrame(P)}]);